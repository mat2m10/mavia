<table class="table">
  <thead>
    <tr>
      <th>Question text</th>
      <th>Options</th>
      <th>Delete</th>
    </tr>
  </thead>
  <tbody>
    <%= form_tag(hidden_questions_path, method: :patch, id: "question-form", data: { turbo: false }) do %>
  <% @questions.each do |question| %>
    <tr>
      <td>
        <%= hidden_field_tag "questions[][id]", question.id %>
        <%= text_field_tag "questions[][question_text]", question.question_text %>
      </td>
      <td>
        <% question.options.each_with_index do |option, index| %>
          <%= text_field_tag "questions[][options][]", option %>
        <% end %>
        <!-- Empty option field -->
        <%= text_field_tag "questions[][options][]", nil, placeholder: 'Add option', class: 'option-field' %>
      </td>
      <td>
        <%= form_tag(delete_question_path(question), method: :delete, class: "delete-question-form", data: { turbo: false, confirm: "Are you sure you want to delete this question?" }) do %>
          <%= hidden_field_tag :_method, :delete %>
          <%= button_tag "", type: "submit", class: "btn btn-danger", title: "Delete Question" do %>
            <i class="fas fa-times"></i> <!-- Font Awesome icon for a red cross -->
          <% end %>
        <% end %>
      </td>
    </tr>
  <% end %>
  <tr>
    <td colspan="2">
      <%= submit_tag "Save Changes", class: "btn btn-primary" %>
    </td>
  </tr>
<% end %>
    <%= form_tag(create_question_path, method: :post, id: "new-question-form", data: { turbo: false }) do %>
      <tr>
        <td>
          <%= text_field_tag "new_question[question_text]", nil, placeholder: 'Enter new question' %>
        </td>
        <td>
          <% 5.times do |index| %>
            <%= text_field_tag "new_question[options][]", nil, placeholder: "Option #{index + 1}" %>
          <% end %>
        </td>
      </tr>
      <tr>
        <td colspan="2">
          <%= submit_tag "Add New Question", class: "btn btn-success" %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>